<h3>Pacientes</h3>


<div class="busca" id="teste">
    <div class="mdl-textfield mdl-js-textfield mdl-textfield--expandable">
        <label class="mdl-button mdl-js-button mdl-button--icon" for="busca">
            <i class="material-icons">search</i>
        </label>
    <div class="mdl-textfield__expandable-holder">
        <input type="search" placeholder="busca" id="busca" class="mdl-textfield__input"/>
        <label class="mdl-textfield__label" for="sample-expandable">Busca</label>
    </div>
    </div>

<br><br><br>

<div id="listap">
<ul class="demo-list-icon mdl-list">

<div class="busca" id="teste">
<input type="search" placeholder="busca" id="busca" class=""/>

<table>
<% @pacientes.each do |paciente| %>
<ul><%= link_to paciente.nome, paciente_path(paciente), class: "paciente" %></ul>
  <li class="mdl-list__item">
  <span class="mdl-list__item-primary-content">
  <i class="material-icons mdl-list__item-icon">person</i>
  <%= link_to paciente.nome, paciente_path(paciente) %>
  </span>
</li>
<% end %>
</ul>
</table>
</div>

<script>
const busca = document.querySelector("#busca");
busca.addEventListener('input', function () {
    const pacientes = document.querySelectorAll(".paciente");
    for (let paciente of pacientes) {
        var compara = paciente.textContent.substr(0, busca.value.length);
        if (busca.value.length !== 0) {
            if (busca.value.toUpperCase() != compara.toUpperCase()) {
                paciente.parentNode.classList.add('some');
            } else {
                paciente.parentNode.classList.remove('some');
            }
        } else {
            paciente.parentNode.classList.remove('some');
        }
    }

})
</script>
</div>
</div>

<script>
const busca = document.querySelector("#busca");
busca.addEventListener('input', function () {
    const pacientes = document.querySelectorAll(".paciente");
    for (let paciente of pacientes) {
        var compara = paciente.textContent.substr(0, busca.value.length);
        if (busca.value.length !== 0) {
            if (busca.value.toUpperCase() != compara.toUpperCase()) {
                paciente.parentNode.classList.add('some');
            } else {
                paciente.parentNode.classList.remove('some');
            }
        } else {
            paciente.parentNode.classList.remove('some');
        }
    }
})
</script>
</div>
